<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="ManWithBear"/><link rel="canonical" href="https://manwithbear.com/articles/2021-09-17-thinking-out-loud-pet-project-series-3"/><meta name="twitter:url" content="https://manwithbear.com/articles/2021-09-17-thinking-out-loud-pet-project-series-3"/><meta name="og:url" content="https://manwithbear.com/articles/2021-09-17-thinking-out-loud-pet-project-series-3"/><title>Thinking out loud - Pet project series - 3/x | ManWithBear</title><meta name="twitter:title" content="Thinking out loud - Pet project series - 3/x | ManWithBear"/><meta name="og:title" content="Thinking out loud - Pet project series - 3/x | ManWithBear"/><meta name="description" content="Developer notes around iOS / Swift / Programming"/><meta name="twitter:description" content="Developer notes around iOS / Swift / Programming"/><meta name="og:description" content="Developer notes around iOS / Swift / Programming"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/css/splash.css" type="text/css"/><link rel="stylesheet" href="/css/theme.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to ManWithBear"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">ManWithBear</a><nav><ul><li><a href="/">Home</a></li><li><a href="/tags">Tags</a></li><li><a href="/about">About</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Thinking out loud - Pet project series - 3/x</h1><h2>Just ignore me</h2><p>Last week we agreed on going with a manual layout. That means our views / controllers are not gonna be instantiated through a <code>NSCoder</code> -&gt; <code>init(coder:)</code> is useless right now. But the compiler doesn't know about our decision and complains about missing implementations.</p><p>For such use cases I have a handy code snippet up my sleeve:</p><pre><code><span class="keyword">@available</span>(*, unavailable, message: <span class="string">"This class can not be used in the Interface Builder"</span>)
<span class="keyword">required init</span>?(coder: <span class="type">NSCoder</span>) { <span class="call">fatalError</span>(<span class="string">"This class can not be used in the Interface Builder"</span>) }
</code></pre><h2>Putting it together</h2><p>I started to implement an ingredients list table with a collection view (logic...huh). And man! How I enjoy working with a "new" <code>UICollectionViewCompositionalLayout</code>.</p><p>At first glance, it may look java-level-bloated, but nothing that a couple of extensions couldn't fix :D</p><p>On second look, creating grid layouts has never been easier.</p><p>Oh and just look at this beauty:</p><img src="/images/2021-09-17-thinking-out-loud-pet-project-series-3/nscollectionlayoutgroup.png" alt="NSCollectionLayoutGroup documentation"/><h2>Hide it under a rug</h2><p>Probably the only feature I miss in Swift right now are namespaces (scopes for identifiers to prevent name collisions).</p><p>One way to achieve namespace-like behaviour is by using nested types, e.g.:</p><pre><code><span class="keyword">enum</span> Layouts { }
<span class="keyword">extension</span> <span class="type">Layouts</span> {
   <span class="keyword">struct</span> MagicLayout { }
}

<span class="type">Layouts</span>.<span class="type">MagicLayout</span>() vs <span class="type">MagicLayout</span>()
</code></pre><p>For smaller projects it's a question of tidiness and things being in their place.</p><p>On bigger projects it's common to have naming issues, when you spend too much time to come up with a name for a thing, cauz you cannot just call it <code>TheThing</code> (well you can, but just once). But if you already have domain specific namespaces, random <code>TheThing</code> becomes domain specific as <code>User.TheThing</code>, <code>Layout.TheThing</code> or whatever you came up with.</p><h2>Call me anytime</h2><p>People tend to put every piece of logic, every single function into some class / struct. Maybe it's a way to avoid "a dirty singleton" bad practices. Or maybe it's thinking something like: "OOP will solve all our problems".</p><p>I personally find small pure functions super handy. Especially if you combine them with namespaces from above.</p><p>For example, new compositional layouts can be just one global function as:</p><pre><code><span class="keyword">enum</span> CollectionLayouts { }
<span class="keyword">extension</span> <span class="type">CollectionLayouts</span> {
    <span class="keyword">enum</span> List {
        <span class="keyword">static func</span> make() -&gt; <span class="type">UICollectionViewLayout</span> {
            ...
            <span class="keyword">return</span> <span class="type">UICollectionViewCompositionalLayout</span>(section: ...)
        }
    }
}

<span class="keyword">let</span> collectionView = <span class="type">UICollectionView</span>(frame: .<span class="dotAccess">zero</span>, collectionViewLayout: <span class="type">CollectionLayouts</span>.<span class="type">List</span>.<span class="call">make</span>())
</code></pre><h2>Consuming package</h2><p>As you remember, SPM is unable to build iOS apps, so we need to create a separate demo project that would add the package as a dependency.</p><p>Luckily, Xcode is able to add local dependencies if you use <code>file://</code> schema:</p><pre><code>file:///<span class="type">Users</span>/{username}/broken_dreams/path_to_project/<span class="type">TheProject</span>
</code></pre><hr><p>If you want to know how it all started, I got you: <a href="https://manwithbear.com/articles/2021-08-27-starting-pet-project-series-0/">Starting Pet project series 0/x | ManWithBear</a></p><p>See ya!</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/theproject">theproject</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>